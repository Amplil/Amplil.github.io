(window.webpackJsonp=window.webpackJsonp||[]).push([[4,3],{228:function(t,e,r){"use strict";r.r(e);var o={props:["cartItems"],mounted:function(){console.log(this.cartItems)},computed:{total:function(){var t=0,e=this.cartItems;for(var r in e)t+=e[r].price*e[r].quantity;return t}},methods:{delete_cart:function(t){$axios.post("http://localhost:3000/api/delete_cart.php",{del_list:t}).then((function(t){app.cartItems=t.data})).catch((function(t){console.log(t)}))}}},n=r(47),component=Object(n.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{attrs:{id:"total"}},[t._v("小計:"+t._s(t._f("formatCurrency")(t.total))+"円")]),t._v(" "),r("div",{attrs:{id:"goods_list"}},t._l(t.cartItems,(function(e,o){return r("div",{key:o,staticClass:"item col-xs-3"},[r("div",{staticClass:"img-block"},[r("img",{attrs:{src:e.image}}),t._v(" "),r("div",[t._v("\n          "+t._s(e.quantity)+"個\n          "),r("button",{on:{click:function(e){return t.delete_cart([o])}}},[r("i",{staticClass:"far fa-trash-alt"})])])])])})),0)])}),[],!1,null,null,null);e.default=component.exports},232:function(t,e,r){"use strict";r.r(e);r(11);var o=r(228),n=r(70),c=r.n(n),l={components:{CartDetail:o.default},data:function(){return{keyword:this.$route.query.keyword,form_keyword:"abc",shop_disp:this.$route.query.shop,order:this.$route.query.order,shop_item:{rakuten:"楽天",amazon:"Amazon",ebay:"ebay"},order_str:{relevanceblender:"おすすめ順","review-rank":"人気順","price-asc-rank":"価格の安い順","price-desc-rank":"価格の高い順"},cartItems:[],items:[],loading:!0,errored:!1,item_list:!1,tr_on:"true"===this.$route.query.tr_on,tr_keyword:"",tr_busy:!1}},mounted:function(){var t=this;this.cart_update(),this.shop_disp&&(null!==this.keyword&&null!==this.order&&""!==this.keyword&&""!==this.order&&0!==this.shop_disp.length?(1==this.tr_on&&this.trans(this.keyword,"ja","en",(function(e){t.tr_keyword=e,t.search_item()})),this.search_item()):this.loading=!1)},methods:{cart_update:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c.a.post("/api/shop/add_cart.php",{item:e}).then((function(e){t.$cartItems=e.data})).catch((function(t){console.log(t)})).finally((function(){}))},searchbtn_click:function(){document.getElementById("searchbtn").click()},trans:function(input,source,t,e){var r=this;this.tr_busy=!0,c.a.get("https://script.google.com/macros/s/AKfycbwslso6KP1b4rBQfDcIrVBh7iJmGzdrvqBKq6s7nfBUTZPeCSlPNg-6-rLjSnnvmhxWYA/exec",{params:{text:input,source:source,target:t}}).then((function(t){r.tr_busy=!1,e(t.data)}))},trans_item:function(t){var e=this;this.items.forEach((function(r){"ebay"===r.shop&&(t?void 0===r.title_ja?e.trans(r.title,"en","ja",(function(t){r.title_ja=t,r.title_en=r.title,r.title=t})):r.title=r.title_ja:void 0!==r.title_en&&(r.title=r.title_en))}))},search_item:function(){var t=this;c.a.get("http://localhost:3000/api/price_comparison_ajax.php",{params:{keyword:this.keyword,shop:this.shop_disp,order:this.order,tr_keyword:this.tr_keyword}}).then((function(e){t.items=e.data,t.items.forEach((function(t){t.quantity=1})),t.trans_item(t.tr_on)})).catch((function(e){console.log(e),t.errored=!0})).finally((function(){t.loading=!1,t.item_list=!0}))}},watch:{tr_on:function(t){this.trans_item(t)}}},d=l,_=r(47),component=Object(_.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("div",{staticClass:"header"},[t._v("いろいろな商品を比較！")]),t._v(" "),r("form",{attrs:{action:"",method:"get"}},[r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"form-control",attrs:{value:"form_keyword",type:"text",id:"searchtextbox",placeholder:"キーワードで探す",name:"keyword"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),t._v(" "),t._m(0),t._v(" "),t._m(1)]),t._v(" "),r("div",{staticClass:"select"},[r("div",{attrs:{id:"shop-select"}},t._l(t.shop_item,(function(e,o){return r("label",{key:o,on:{click:t.searchbtn_click}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.shop_disp,expression:"shop_disp"}],attrs:{type:"checkbox",name:"shop[]"},domProps:{value:o,checked:Array.isArray(t.shop_disp)?t._i(t.shop_disp,o)>-1:t.shop_disp},on:{change:function(e){var r=t.shop_disp,n=e.target,c=!!n.checked;if(Array.isArray(r)){var l=o,d=t._i(r,l);n.checked?d<0&&(t.shop_disp=r.concat([l])):d>-1&&(t.shop_disp=r.slice(0,d).concat(r.slice(d+1)))}else t.shop_disp=c}}}),t._v(t._s(e)+"\n                    ")])})),0),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.order,expression:"order"}],attrs:{id:"order-select",name:"order"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.order=e.target.multiple?r:r[0]},t.searchbtn_click]}},t._l(t.order_str,(function(e,o){return r("option",{key:o,domProps:{value:o}},[t._v(t._s(e))])})),0),t._v(" "),r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.tr_on,expression:"tr_on"}],attrs:{type:"checkbox",name:"tr_on"},domProps:{value:!0,checked:Array.isArray(t.tr_on)?t._i(t.tr_on,!0)>-1:t.tr_on},on:{change:function(e){var r=t.tr_on,o=e.target,n=!!o.checked;if(Array.isArray(r)){var c=t._i(r,true);o.checked?c<0&&(t.tr_on=r.concat([true])):c>-1&&(t.tr_on=r.slice(0,c).concat(r.slice(c+1)))}else t.tr_on=n}}}),t._v("翻訳機能\n                    "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.tr_on,expression:"tr_on"}]},[t._v("翻訳した検索ワード："+t._s(t.tr_keyword)+" "+t._s(t.tr_busy?"翻訳中":"翻訳済み"))])])])]),t._v(" "),t.errored?r("div",[r("p",[t._v("We're sorry, we're not able to retrieve this information at the moment, please try back later")])]):r("div",[t.loading?r("transition",{attrs:{id:"loading",name:"fade"}},[r("div",{staticClass:"d-flex justify-content-center m-5"},[r("div",{staticClass:"spinner-border",attrs:{role:"status"}},[r("span",{staticClass:"visually-hidden"},[t._v("Loading...")])])])]):t._e(),t._v(" "),r("div",{staticClass:"row",attrs:{id:"item-list"}},t._l(t.items,(function(e){return r("div",{key:e,staticClass:"item col-xs-3"},[r("a",{attrs:{href:e.url,target:"_blank"}},[r("div",{staticClass:"img-block"},[r("img",{attrs:{src:e.image}})]),t._v(" "),r("div",{staticClass:"pos-left"},[t._v("["+t._s(t.shop_item[e.shop])+"] "+t._s(e.title))]),t._v(" "),r("div",{staticClass:"pos-left a-price"},[t._v(t._s(t._f("formatCurrency")(e.price)))])]),t._v(" "),r("div",{staticClass:"input-group-btn"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.quantity,expression:"item.quantity"}],on:{change:[function(r){var o=Array.prototype.filter.call(r.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(e,"quantity",r.target.multiple?o:o[0])},function(r){return t.cart_update(e)}]}},t._l(10,(function(i){return r("option",{key:i,domProps:{value:i}},[t._v(t._s(i))])})),0),t._v(" "),r("button",{staticClass:"btn add_goods",attrs:{value:e.item_id},on:{click:function(r){return t.cart_update(e)}}},[t._v("\n                            "+t._s(void 0===this.$cartItems[e.item_id]?"カートに入れる":"追加済み")+"\n                        ")])])])})),0)],1)]),t._v(" "),r("div",{staticClass:"col-3"},[r("CartDetail",{attrs:{cartItems:t.cartItems}}),t._v(" "),t._m(2)],1)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"input-group-btn"},[e("button",{staticClass:"btn btn-secondary",attrs:{id:"searchbtn",type:"submit"}},[e("i",{staticClass:"fas fa-search"})])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",{staticClass:"btn btn-light"},[r("a",{attrs:{href:"price_comparison_cart.html",target:"_blank"}},[r("i",{staticClass:"fas fa-shopping-cart"}),t._v("カートを見る")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"sidebar_fixed"},[r("ins",{staticClass:"adsbygoogle",staticStyle:{display:"block"},attrs:{"data-ad-client":"ca-pub-2661815267943239","data-ad-slot":"9624100506","data-ad-format":"auto","data-full-width-responsive":"true"}}),t._v(" "),r("ins",{staticClass:"adsbygoogle",staticStyle:{display:"block"},attrs:{"data-ad-client":"ca-pub-2661815267943239","data-ad-slot":"9624100506","data-ad-format":"auto","data-full-width-responsive":"true"}}),t._v(" "),r("a",{staticStyle:{"word-wrap":"break-word"},attrs:{href:"https://hb.afl.rakuten.co.jp/hsc/215065c8.7b0eff9b.21506482.ec2625de/?link_type=pict&ut=eyJwYWdlIjoic2hvcCIsInR5cGUiOiJwaWN0IiwiY29sIjoxLCJjYXQiOiI1NyIsImJhbiI6IjE0NjY3OTgiLCJhbXAiOmZhbHNlfQ%3D%3D",target:"_blank",rel:"nofollow sponsored noopener"}},[r("img",{staticStyle:{margin:"2px"},attrs:{src:"https://hbb.afl.rakuten.co.jp/hsb/215065c8.7b0eff9b.21506482.ec2625de/?me_id=1&me_adv_id=1466798&t=pict",border:"0",alt:"",title:""}})])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{CartDetail:r(228).default})}}]);